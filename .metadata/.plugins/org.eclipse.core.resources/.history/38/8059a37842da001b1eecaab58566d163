/*
 * Terminal.c
 *
 *  Created on: Jul 1, 2021
 *      Author: ASUS
 */

#include "Terminal.h"

char rxData[ RXDATA_MAX ] = {0} ;
char rxByte[1] = {0} ;
unsigned int rxCnt = 0 ;

void terminal_init() {
	HAL_UART_Receive_IT( &TERMINAL_TXRX, (uint8_t*)rxByte, 1 ) ;
}



void terminal_irqProcess() {
	if(  rxByte[0] == '\r' ){
		rxDone_Flag = 1 ;
		memset( rxByte, 0, 1 ) ;
	}else{
		rxData[ rxCnt ] = rxByte[0] ;
		if ( rxCnt < RXDATA_MAX ) rxCnt++ ;
	}
	HAL_UART_Receive_IT( &TERMINAL_TXRX, (uint8_t*)rxByte, 1 ) ;
}



void terminal_memreset() {
    rxCnt = 0 ;
    rxDone_Flag = 0 ;
    memset( rxData, 0, RXDATA_MAX );
}
